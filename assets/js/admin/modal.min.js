var GroundhoggModal={};!function($,t,e){$.extend(t,{is_open:!1,overlay:null,window:null,content:null,title:null,source:null,frameUrl:"",args:{},defaults:{},init:function(t,s){this.is_open&&this.close();Object.assign(this.args,e),"string"==typeof s?this.parseArgs(s):this.args=$.extend(e,s),this.overlay=$(".popup-overlay"),this.window=$(".popup-window"),this.content=$(".popup-content"),this.title=$(".popup-title"),this.loader=$(".iframe-loader-wrapper"),this.sizeup(),this.matchUrl(this.args.source)?(this.loader.removeClass("hidden"),this.source=$("<div><iframe class='hidden' src='"+this.args.source+"' width='"+this.args.width+"' height='"+(this.args.height-100)+"' style='margin-bottom: -5px;' onload='GroundhoggModal.prepareFrame( this )'></iframe></div>")):this.source=$("#"+this.args.source),this.title.text(t),void 0!==this.args.footer&&"false"===this.args.footer?$(".popup-footer").addClass("hidden"):$(".popup-footer").removeClass("hidden"),void 0!==this.args.footertext&&$("#popup-close-footer").text(this.args.footertext),this.open()},matchUrl:function(t){var e=new RegExp(/(https|http)?:\/\/((www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6})|(localhost)\b([-a-zA-Z0-9@:%_\+.~#?&\/=]*)/);return t.match(e)},parseArgs:function(t){var e=t.indexOf("#"),s=t.substring(e+1);s=s.split("&");for(var i=0;i<s.length;i++){var o=s[i].split("=");this.args[o[0]]=decodeURIComponent(o[1].replace("+"," "))}return this.args},sizeup:function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this.args.height>e&&(this.args.height=e-50),this.args.width>t&&(this.args.width=t-50),this.window.css("height",this.args.height+"px"),this.window.css("width",this.args.width+"px"),this.window.css("top","calc( 50% - "+this.args.height/2+"px )"),this.window.css("left","calc( 50% - "+this.args.width/2+"px )"),this.content.css("height",this.args.height-100+"px"),this.loader.css("height",this.args.height-100+"px")},open:function(){this.pullContent(),this.showPopUp(),this.is_open=!0,$(document).trigger("GroundhoggModalOpened")},close:function(){this.is_open&&(this.pushContent(),this.hidePopUp(),void 0!==this.args.preventSave&&!1!==this.args.preventSave&&"false"!==this.args.preventSave||$(document).trigger("GroundhoggModalClosed"),this.reset())},pullFrame:function(t){var e=$(t),s=$("#wpbody-content",e.contents());this.content.append(s)},prepareFrame:function(t){$(t).removeClass("hidden"),this.content.removeClass("hidden"),this.content.css("padding",0),this.loader.addClass("hidden")},frameReload:function(){this.content.addClass("hidden"),this.loader.removeClass("hidden")},pullContent:function(){this.content.append(this.source.children()),$(document).trigger("GroundhoggModalContentPulled")},pushContent:function(){this.source.append(this.content.children()),$(document).trigger("GroundhoggModalContentPushed")},showPopUp:function(){this.overlay.removeClass("hidden"),this.window.removeClass("hidden"),this.overlay.fadeIn(),this.window.fadeIn()},hidePopUp:function(){this.window.addClass("hidden"),this.overlay.addClass("hidden")},getDefaults:function(){return JSON.parse(JSON.stringify(e))},reset:function(){this.is_open=!1,this.args=this.getDefaults(),this.content.css("padding","0 20px")},reload:function(){var t=this;$(document).on("click",".trigger-popup",function(e){e.preventDefault(),t.init(this.title,this.href),$(this).hasClass("no-padding")&&$(".popup-content").css("padding","0")}),$(document).on("click",".popup-close",function(){$(document).trigger("modal-closed"),t.close()})}}),$(function(){t.reload(),$(".wpgh-color").wpColorPicker()}),$(document).on("new-step",function(){$(".wpgh-color").wpColorPicker()})}(jQuery,GroundhoggModal,GroundhoggModalDefaults);